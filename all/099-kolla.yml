---
##########################################################
# Enable default set of services

enable_common: "yes"

# infrastructure

enable_central_logging: "yes"
enable_prometheus: "yes"
enable_redis: "yes"
enable_grafana: "yes"

# openstack

enable_cinder: "yes"
enable_designate: "yes"
enable_octavia: "yes"

##########################################################
# Set default configuartions

certificates_dir: /share/certificates

kolla_base_distro: ubuntu
kolla_install_type: source

config_strategy: COPY_ALWAYS
node_custom_config: "{{ configuration_directory }}/environments/kolla/files/overlays"

docker_namespace: osism
docker_registry_kolla: quay.io

openstack_logging_debug: "False"  # NOTE: This has to be "False", not "false"!

# haproxy
kolla_enable_tls_external: "yes"

haproxy_client_timeout: 5m
haproxy_server_timeout: 5m

openstack_cacert: "/etc/ssl/certs/ca-certificates.crt"

# mariadb
enable_mariabackup: "yes"

# horizon
horizon_backend_database: "yes"

# keystone
keystone_token_provider: "fernet"
# NOTE: use authorization code in keystone instead of default upstream
keystone_federation_oidc_response_type: "code"
keystone_oidc_forward_header: "X-Forwarded-Proto"

enable_keystone_federation: false         # Must be a boolean
keystone_enable_federation_openid: false  # Must be a boolean

# neutron
enable_neutron_port_forwarding: "yes"
enable_neutron_qos: "yes"

# nova
nova_console: novnc

# octavia
octavia_loadbalancer_topology: "ACTIVE_STANDBY"
octavia_amp_image_tag: amphora
octavia_certs_work_dir: /share

enable_octavia_jobboard: "no"

# ceph
ceph_nova_user: nova

# rabbitmq
rabbitmq_monitoring_user: monitoring

# gnocchi
enable_gnocchi_statsd: "no"

# fluentd

# NOTE: https://github.com/osism/issues/issues/3
fluentd_enable_watch_timer: "true"

# rolling upgrades
glance_enable_rolling_upgrade: "yes"

##########################################################
# Custom features

rabbitmq_datadir_volume: "rabbitmq"

##########################################################
# Bugfixes

# NOTE: https://github.com/osism/issues/issues/231
ceilometer_central_enable_healthchecks: "no"

# NOTE: https://github.com/osism/issues/issues/288
gnocchi_statsd_enable_healthchecks: "no"

# required to be backward compatible
enable_ironic_dnsmasq: "no"
enable_skydive: "no"

keystone_admin_port: "35357"
keystone_admin_listen_port: "{{ keystone_admin_port }}"
